% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/varclus.R
\name{VarClus}
\alias{VarClus}
\title{Variable Clustering using Hierarchical Methods}
\description{
Implements hierarchical variable clustering using the VarClus algorithm from Hmisc.
Variables are grouped based on their correlation structure, with each cluster
represented by its first principal component (PC1).
}
\details{
The VarClus algorithm works as follows:
\enumerate{
\item Calculate similarity matrix between all variables (correlation or Spearman)
\item Perform hierarchical clustering on similarity matrix
\item Cut dendrogram at specified number of clusters (or automatic selection)
\item Each cluster is represented by its first principal component (PC1)
}

The algorithm iteratively splits clusters to maximize the variance explained by
the first principal component of each cluster.
}
\section{Similarity Measures}{

Two similarity measures are available:
\itemize{
\item \strong{pearson}: Pearson correlation coefficient (linear relationships)
\item \strong{spearman}: Spearman rank correlation (monotonic relationships)
}
}

\section{Cluster Quality}{

Cluster quality is assessed by:
\itemize{
\item \strong{Eigenvalue}: First eigenvalue from PCA of cluster variables
\item \strong{Proportion explained}: Variance explained by PC1
\item \strong{R? own cluster}: Squared correlation with own cluster PC1
\item \strong{R? next cluster}: Squared correlation with nearest other cluster PC1
\item \strong{1-R? Ratio}: (1-R?_own)/(1-R?_next) - should be < 1 for good assignment
}
}

\section{Illustrative Variables}{

New variables can be projected onto existing clusters using:
\itemize{
\item \code{predict()}: Assigns a single variable to the best cluster
\item \code{illustrative()}: Full analysis of multiple illustrative variables with regression and PCA visualization
}
}

\examples{
\dontrun{
# Example with numeric data
data(mtcars)
X_num <- mtcars[, c("mpg", "cyl", "disp", "hp", "drat", "wt", "qsec")]

# Automatic k selection
vc <- VarClus$new(similarity = "pearson")
vc$fit(X_num)

# Display results
vc$print()
vc$summary()

# Visualizations
dend_plot <- vc$get_dendrogram()
dend_plot()

heatmap_plot <- vc$get_heatmap()
heatmap_plot()

# Manual k selection
vc_k3 <- VarClus$new(similarity = "pearson", n_clusters = 3)
vc_k3$fit(X_num)

# Get cluster assignments
clusters_df <- vc_k3$get_clusters_table()

# Predict new variable
new_var <- mtcars$vs
prediction <- vc_k3$predict(new_var)

# Illustrative variables (full analysis)
illust_vars <- mtcars[, c("vs", "am", "gear")]
illust_results <- vc_k3$illustrative(illust_vars)
print(illust_results$table)
illust_results$plot()
}


## ------------------------------------------------
## Method `VarClus$fit`
## ------------------------------------------------

\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
}

## ------------------------------------------------
## Method `VarClus$get_dendrogram`
## ------------------------------------------------

\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
dend_plot <- vc$get_dendrogram()
dend_plot()
}

## ------------------------------------------------
## Method `VarClus$get_heatmap`
## ------------------------------------------------

\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
heatmap_plot <- vc$get_heatmap()
heatmap_plot()
}

## ------------------------------------------------
## Method `VarClus$predict`
## ------------------------------------------------

\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
prediction <- vc$predict(new_variable)
}

## ------------------------------------------------
## Method `VarClus$illustrative`
## ------------------------------------------------

\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
illust_results <- vc$illustrative(illustrative_vars)
print(illust_results$table)
illust_results$plot()
}

## ------------------------------------------------
## Method `VarClus$print`
## ------------------------------------------------

\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
vc$print()
}

## ------------------------------------------------
## Method `VarClus$summary`
## ------------------------------------------------

\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
summary_data <- vc$summary(print_output = FALSE)
}

## ------------------------------------------------
## Method `VarClus$get_clusters_table`
## ------------------------------------------------

\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
clusters_df <- vc$get_clusters_table()
}
}
\references{
\itemize{
\item Sarle, W. S. (1990). The VARCLUS Procedure. SAS/STAT User's Guide.
\item Harrell, F. E. (2001). Regression Modeling Strategies. Springer.
}
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{similarity}}{Similarity measure: "pearson" or "spearman"}

\item{\code{n_clusters}}{Number of clusters (NULL for automatic selection)}

\item{\code{model}}{Fitted VarClus model object from Hmisc::varclus()}

\item{\code{clusters}}{Data frame with variable names and cluster assignments}

\item{\code{data}}{Numeric dataset used for clustering}

\item{\code{dendo}}{Internal dendrogram object}

\item{\code{plot_elbow}}{Plot object from elbow method}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-VarClus-new}{\code{VarClus$new()}}
\item \href{#method-VarClus-fit}{\code{VarClus$fit()}}
\item \href{#method-VarClus-get_dendrogram}{\code{VarClus$get_dendrogram()}}
\item \href{#method-VarClus-get_heatmap}{\code{VarClus$get_heatmap()}}
\item \href{#method-VarClus-predict}{\code{VarClus$predict()}}
\item \href{#method-VarClus-illustrative}{\code{VarClus$illustrative()}}
\item \href{#method-VarClus-print}{\code{VarClus$print()}}
\item \href{#method-VarClus-summary}{\code{VarClus$summary()}}
\item \href{#method-VarClus-get_clusters_table}{\code{VarClus$get_clusters_table()}}
\item \href{#method-VarClus-clone}{\code{VarClus$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-VarClus-new"></a>}}
\if{latex}{\out{\hypertarget{method-VarClus-new}{}}}
\subsection{Method \code{new()}}{
Create a new VarClus object
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{VarClus$new(similarity = "pearson", n_clusters = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{similarity}}{Similarity measure: "pearson" or "spearman" (default: "pearson")}

\item{\code{n_clusters}}{Number of clusters (NULL for automatic selection)}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A new \code{VarClus} object
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-VarClus-fit"></a>}}
\if{latex}{\out{\hypertarget{method-VarClus-fit}{}}}
\subsection{Method \code{fit()}}{
Fit the variable clustering model
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{VarClus$fit(X_num)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{X_num}}{Numeric data frame or matrix}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Self (invisibly) for method chaining
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-VarClus-get_dendrogram"></a>}}
\if{latex}{\out{\hypertarget{method-VarClus-get_dendrogram}{}}}
\subsection{Method \code{get_dendrogram()}}{
Generate dendrogram plot of clustered variables
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{VarClus$get_dendrogram()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Function that generates the dendrogram plot
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
dend_plot <- vc$get_dendrogram()
dend_plot()
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-VarClus-get_heatmap"></a>}}
\if{latex}{\out{\hypertarget{method-VarClus-get_heatmap}{}}}
\subsection{Method \code{get_heatmap()}}{
Generate correlation heatmap of variables
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{VarClus$get_heatmap()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Function that generates the interactive heatmap (plotly)
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
heatmap_plot <- vc$get_heatmap()
heatmap_plot()
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-VarClus-predict"></a>}}
\if{latex}{\out{\hypertarget{method-VarClus-predict}{}}}
\subsection{Method \code{predict()}}{
Predict cluster assignment for a single new variable
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{VarClus$predict(new_var)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{new_var}}{Numeric vector (same length as training data)}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
List containing:
\itemize{
\item \code{predicted_cluster} - Assigned cluster number
\item \code{cluster_similarity} - Average correlation with each cluster
\item \code{var_corr} - Correlations with variables in assigned cluster
}
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
prediction <- vc$predict(new_variable)
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-VarClus-illustrative"></a>}}
\if{latex}{\out{\hypertarget{method-VarClus-illustrative}{}}}
\subsection{Method \code{illustrative()}}{
Project illustrative variables onto clusters with full analysis
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{VarClus$illustrative(illust_vars)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{illust_vars}}{Data frame of numeric illustrative variables}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
List containing:
\itemize{
\item \code{table} - Regression results (R, R?, t-values, p-values)
\item \code{plot} - Function to generate PCA correlation circle
}
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
illust_results <- vc$illustrative(illustrative_vars)
print(illust_results$table)
illust_results$plot()
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-VarClus-print"></a>}}
\if{latex}{\out{\hypertarget{method-VarClus-print}{}}}
\subsection{Method \code{print()}}{
Print concise summary of the VarClus model
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{VarClus$print()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Self (invisibly)
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
vc$print()
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-VarClus-summary"></a>}}
\if{latex}{\out{\hypertarget{method-VarClus-summary}{}}}
\subsection{Method \code{summary()}}{
Generate detailed clustering statistics
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{VarClus$summary(print_output = TRUE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{print_output}}{Logical, whether to print to console (default: TRUE)}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
List containing:
\itemize{
\item \code{global_stats} - Basic statistics
\item \code{cluster_summary} - Per-cluster PCA statistics
\item \code{cluster_quality} - Average R? per cluster
\item \code{R2_details} - Detailed R? for each variable
\item \code{similarity_matrix} - Similarity matrix between variables
}
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
summary_data <- vc$summary(print_output = FALSE)
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-VarClus-get_clusters_table"></a>}}
\if{latex}{\out{\hypertarget{method-VarClus-get_clusters_table}{}}}
\subsection{Method \code{get_clusters_table()}}{
Get cluster assignments as a data frame
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{VarClus$get_clusters_table()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Data frame with variables and cluster assignments
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
data(crime)
vc <- VarClus$new()
vc$fit(crime)
clusters_df <- vc$get_clusters_table()
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-VarClus-clone"></a>}}
\if{latex}{\out{\hypertarget{method-VarClus-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{VarClus$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
